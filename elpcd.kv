#:kivy 1.11.1
#:import toast kivymd.toast.toast
#:import view_ttd lib.py.view_ttd.view_ttd
#:import open_social_media lib.utils.open_social_media
#:include ./lib/kv/drawer_content.kv
<MainFrame>:
    id: main_frame
    orientation: 'vertical'
    Manager:
        id: screen_manager
        MDScreen:
            name: "welcome"
            MDBoxLayout:
                padding: (dp(100),dp(200))
                orientation: 'vertical'
                md_bg_color: app.theme_cls.primary_dark
                MDRoundFlatButton:
                    text: f'[b]Bem-vindo ao [i]El PCD[/i][/b]'
                    markup: True
                    size_hint: 1, 1
                    halign: 'center'
                    font_size: '96sp'
                    md_bg_color: app.theme_cls.bg_light
                    text_color: app.theme_cls.primary_dark
                    on_release: screen_manager.current = 'pcd'
        MDScreen:
            name: "pcd"
            MDBoxLayout:
                orientation: 'vertical'
                md_bg_color: app.theme_cls.bg_light
                MDToolbar:
                    title: "Menu"
                    elevation: 10
                    height: dp(50)
                    theme_text_color: 'Custom'
                    specific_text_color: app.theme_cls.bg_light
                    md_bg_color: app.theme_cls.primary_dark
                    left_action_items: [['menu', lambda x: nav_drawer.set_state()]]
                    right_action_items: [['magnify', lambda x: toast('Pesquisa ainda n√£o implementada',1.5)]]
                MDBoxLayout:
                    orientation: 'horizontal'
                    MDBoxLayout:
                        id: tree_frame
                        orientation: 'vertical'
                        size_hint_x: .3
                        padding: [dp(10),dp(10),dp(5),dp(10)]
                        spacing: dp(10)

                    MDBoxLayout:
                        orientation: 'vertical'
                        padding: [dp(5),dp(10),dp(10),dp(10)]
                        size_hint_x: .7
                        spacing: dp(10)
                        MDBoxLayout:
                            id: data_frame
                            orientation: 'vertical'
                            md_bg_color: app.theme_cls.bg_darkest
        MDScreen:
            name: "export"
            on_pre_enter:
                app.export_data.data_tree.regen_tree()
                app.export_data.switch_button(reset=True)
            MDBoxLayout:
                orientation: 'vertical'
                md_bg_color: app.theme_cls.bg_light
                MDToolbar:
                    id: toolbar
                    title: "Menu"
                    elevation: 10
                    height: dp(50)
                    theme_text_color: 'Custom'
                    specific_text_color: app.theme_cls.bg_light
                    md_bg_color: app.theme_cls.primary_dark
                    left_action_items: [['menu', lambda x: nav_drawer.set_state()]]
                MDBoxLayout:
                    id: export_frame
                    orientation: 'vertical'
                    md_bg_color: app.theme_cls.bg_light
        MDScreen:
            name: "viewttd"
            on_pre_enter: view_ttd()
            md_bg_color: app.theme_cls.primary_dark

    DrawerContent:
        id: nav_drawer